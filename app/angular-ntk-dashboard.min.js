"use strict";angular.module("admin",["ngRoute","admin.dashboard","ngAnimate"]).config(["$locationProvider","$routeProvider",function(e,t){e.hashPrefix("!"),t.when("/",{redirectTo:"/home"}).when("/home",{}).when("/dashboard",{templateUrl:"dashboard/dashboard.html",controller:"DashboardViewCtrl"}).otherwise({templateUrl:"template/404.html"})}]).config(["$logProvider",function(e){e.debugEnabled(!0)}]).controller("AppCtrl",["$rootScope","$scope","$location","$window","$http","$timeout","$interval",function(o,e,r,t,n,a,i){o.system={currentTime:moment().locale("pt-br").format("L LTS"),currency:"R$",apiURL:""},o.$on("$locationChangeStart",function(e,t){r.path("/dashboard"),o.system.currentTime=moment().locale("pt-br").format("L LTS"),$(".modal-backdrop").remove(),toastr.clear()}),o.converteGatePrice=function(e,t){try{if(isNaN(e))throw"isNaN";var o=(e/100).toFixed(2).split(".");return o[0]=o[0].split(/(?=(?:...)*$)/).join("."),o.join(",")}catch(e){return""}},o.converteDocumento=function(t){try{var e=goodString(t);return 11==(e=e.replace(/\D/g,"")).length?e=(e=(e=e.replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d{1,2})$/,"$1-$2"):14==e.length?e=(e=(e=(e=e.replace(/(\d{2})(\d)/,"$1.$2")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d)/,"$1/$2")).replace(/(\d{4})(\d{1,2})$/,"$1-$2"):goodString(t)}catch(e){return t}},o.converteTelefone=function(t){try{var e=goodString(t);return 10==(e=t.replace(/\D/g,"")).length?e=(e=e.replace(/(\d{2})(\d)/,"($1) $2")).replace(/(\d{4})(\d)/,"$1-$2"):11==e.length?e=(e=e.replace(/(\d{2})(\d)/,"($1) $2")).replace(/(\d{5})(\d)/,"$1-$2"):goodString(t)}catch(e){return t}},o.padZero=function(e,t){return Array(Math.max(t-String(e).length+1,0)).join(0)+e},o.moment=function(e){return null==e?"":moment(e).locale("pt-br").format("L LTS")},o.momentDate=function(e){return null==e?"":moment(e).format("DD/MM/YYYY")}}]).factory("focus",["$timeout","$window",function(o,r){return function(e){var t=r.document.getElementById(e);t&&t.focus(),o(function(){t&&t.focus()},500)}}]).directive("eventFocus",["focus",function(r){return function(e,t,o){t.on(o.eventFocus,function(){r(o.eventFocusId)}),e.$on("$destroy",function(){t.off(o.eventFocus)})}}]).filter("sumByKey",function(){return function(e,t){if(void 0===e||void 0===t)return 0;for(var o=0,r=e.length-1;0<=r;r--)o+=parseInt(e[r][t]);return o}});var nodeAuthenticateURL="/api/authenticate";angular.module("admin.dashboard",["ngRoute","chart.js","admin.services.dashboard"]).controller("DashboardViewCtrl",["$log","$rootScope","$scope","dashboardService",function(e,t,o,r){e.debug("-- DashboardViewCtrl LOADED"),o._isLoadingPage=!1,o.reports_conciliadas=[],o.load=function(){o._isLoadingPage=!0,r.getTransactions("C").then(function(e){o.reports_conciliadas=e},function(e){toastr.error("Erro ao carregar as transacoes"),console.error("Erro ao carregar as transacoes")}).finally(function(){o._isLoadingPage=!1})};var n=function(){e.debug("* status polling STARTED"),o.load(),setTimeout(function(){"function"==typeof n&&n()},3e4)};n(),o.$on("$destroy",function(){n=null}),o.getDashboardInfo=function(e){alert("Periodo -> "+e)}}]),angular.module("admin.services.dashboard",[]).service("dashboardService",["$log","$http","$q","$window",function(o,r,n,e){return o.debug("- DashboardService LOADED"),{getTransactions:function(e){o.debug("getTransactions type --\x3e "+e);var t=n.defer();return r({method:"GET",url:"http://payreportdemo.ntk.com.br:53680/api/AutoCom/GetTransacaoPorTecnologia",headers:{Authorization:"Basic dmljdG9yLmR1YXJ0ZUBudGsuY29tLmJyOnZpY3Rvcg=="},params:{pessoaId:"3502",tecnologiaId:"4828334,4828335,4828336,4828337,4828328,4828328",dataIni:"10/01/2015",dataFim:"10/01/2019"}}).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},getTrAdquirentesTipo:function(){o.debug("id_analytics called...");var e=JSON.parse(localStorage.getItem("ID_ANALYTICS"));if(e)return e;var t=n.defer();return r({method:"GET",url:"/analytics/id"}).then(function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise}}}]);